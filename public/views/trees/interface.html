<div ng-controller="TreesCtrl" ng-init="findOne()">
	<div id="interface" class="col-lg-12" ng-controller="PeopleCtrl">
		<div id="col-filter" class="col-lg-3" ng-include="'views/people/partials/filter.html'"></div>
		<div id="col-main" class="col-lg-9" ng-show="activePerson._id">
			<div id="col-canvas" class="col-lg-12" ng-include="'views/people/partials/canvas.html'"></div>
			<div id="col-data" class="col-lg-12" ng-include="'views/people/partials/dataframe.html'"></div>
		</div>
		<div class="panel-instruct" class="col-lg-9" ng-hide="activePerson._id">
			<h2>Choose a person from the list</h2>
			<p>or...</p>
			<p><button class="btn btn-warn" ng-click="addPerson()">Add a new person</button></p>
		</div>
		
		<div class="modal fade">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
						<h3 ng-show="action" class="modal-title">Link a {{action}} to {{activePerson.birth_name}}</h3>
						<h3 ng-hide="action" class="modal-title">Let's get started</h3>
					</div>
					<div class="modal-body" ng-show="suggestedRelatives.length > 0">
						<h4>Select existing person</h4>

						<form class="form-horizontal" role="form" ng-submit="updateRelation()">
						  <div class="form-group">
						    <label for="relative" class="col-lg-3 control-label">Select {{action}}</label>
						    <div class="col-lg-9">
						      <select ng-model="relation" name="relative" ng-options="r._id as r.birth_name for r in suggestedRelatives.existing">
						      </select>
						    </div>
						  </div>
						  <div class="form-group">
						    <div class="col-lg-offset-3 col-lg-9">
						      <button type="submit" class="btn btn-default">Add {{action}}</button>
						    </div>
						  </div>
						</form>
					</div>
					<div class="modal-body">
						<h4>Add a new person</h4>	

						<form class="form-horizontal" role="form" ng-submit="create()">
						  <div class="form-group">
						    <label for="birthname" class="col-lg-3 control-label">Birth name</label>
						    <div class="col-lg-9">
						      <input ng-model="newPerson.birth_name" type="text" class="form-control" id="birthname" placeholder="Birth name">
						    </div>
						  </div>
						  <div class="form-group">
						    <label for="gender" class="col-lg-3 control-label">Gender</label>
						    <div class="col-lg-9">
						      <label class="radio-inline">
						        <input type="radio" name="gender" ng-model="newPerson.gender" value="1"> Male
						      </label>
						      <label class="radio-inline">
						        <input type="radio" name="gender" ng-model="newPerson.gender" value="2"> Female
						      </label>
						    </div>
						  </div>
						  <div class="form-group" ng-show="action == 'child'">
						    <label for="parents" class="col-lg-3 control-label">Parents</label>
						    <div class="col-lg-9">
						      {{activePerson.birth_name}} and
						      <select ng-model="additionalRelation" name="relative" ng-options="r._id as r.birth_name for r in suggestedRelatives[action]">
						      </select>
						    </div>
						  </div>
						  <div class="form-group" ng-show="action == 'spouse'">
						    <label for="parents" class="col-lg-3 control-label">Children</label>
						    <div class="col-lg-9">
						    	<label ng-repeat="r in suggestedRelatives[action]">
										<input type="checkbox" name="suggestedRelatives[]" value="{{r._id}}" ng-checked="r.checked" ng-model="r.checked"> {{r.birth_name}}
						    	</label>
						    </div>
						  </div>
						  <div class="form-group" ng-show="action == 'parent'">
						    <label for="parents" class="col-lg-3 control-label">Spouse?</label>
						    <div class="col-lg-9">
						      <select ng-model="additionalRelation" name="relative" ng-options="r._id as r.birth_name for r in suggestedRelatives[action]">
						      </select>
						    </div>
						  </div>
						  <div class="form-group">
						    <div class="col-lg-offset-3 col-lg-9">
						      <button type="submit" class="btn btn-default">Create person</button>
						    </div>
						  </div>
						</form>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>